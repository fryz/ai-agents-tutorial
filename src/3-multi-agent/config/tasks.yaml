planning_task:
  description: >
    Come up with a list of tasks that need to be completed to complete the research project about {company_name}. Make sure that the following research topics are covered: 
    - Company description
    - Company goals
    - Company performance
    - Company competitors
    - Company market position
    - Company financials
    - Company news
    If there is already a plan, review the plan with the information you have gathered from the agents
    and determine if the plan needs to be updated. If it does, generate an updated plan.
    To perform this task, you have access to a tool that allows you perform sequential thinking and generate a plan.
  expected_output: >
    A list of tasks that need to be completed to complete the research project about {company_name}.
  agent: orchestrator

review_task:
  description: >
    Review the information that was returned from the agents. If there is new information from the 
    BD Analyst, send this information to the Account Executive for feedback. If there is feedback
    from the Account Executive, send this feedback to the BD Analyst for correction (and track this with a new task in the todo list). If there is no feedback, proceed to the next step in the plan.
    Don't send the same information to the Account Executive for feedback more than once.
    If all of the research and feedback tasks have been completed, send the information to the Reporter for reporting.

  expected_output: >
    A list of tasks that need to be completed to complete the research project about {company_name}.
  agent: orchestrator

research_task:
  description: >
    Conduct a thorough research of {company_name}'s {research_topic} and prepare a brief that will be used by an Account Executive to present to a potential client. To perform this task, you have access to tools that allow you to search the web and download information from specific web resources.
  expected_output: >
    A list of 10 bullet points of the most relevant information about {company_name}'s {research_topic}, along with a bulleted list of the web resources that you used to gather the information.
  agent: analyst

feedback_task:
  description: >
    Review the information that was returned from the BD Analyst and provide feedback about the quality, completeness, and
    correctness of the information. To perform this task, you have access to tools that allow you to search the web and download information from specific web resources.
  expected_output: >
    Feedback about the quality, completeness, and correctness of the information. If there is no feedback, return "No feedback".
  agent: account_executive

reporting_task:
  description: >
    Review the content you received and expand on it to create a detailed report that will be used by an Account Executive to present to a potential client.
    Make sure the report is detailed and contains all the relevant information about {company_name}.
    
    After creating the report, use the Notion MCP Tool (API-post-page) to create a new document in Notion with the report content.
    
    IMPORTANT: The basic page creation worked! Now try to add content using the API-patch-page tool.
    
    STEP 1: Create the page with just the title:
    {
      "parent": {"page_id": "26d1d37e9a10806b807aec4b2c9f6d62"},
      "properties": {
        "title": [{"text": {"content": "{company_name} Comprehensive Report (2025)"}}]
      }
    }
    
    STEP 2: Use API-patch-page to add content. The correct schema for API-patch-page is:
    {
      "page_id": "[page_id_from_step_1]",
      "properties": {
        "title": [{"text": {"content": "{company_name} Comprehensive Report (2025)"}}]
      }
    }
    
    STEP 3: Use API-patch-block-children to add content blocks. NOTE: This tool only supports "paragraph" and "bulleted_list_item" types, NOT heading blocks.
    
    Use markdown-style headers within paragraph content:
    {
      "block_id": "[page_id_from_step_1]",
      "children": [
        {
          "type": "paragraph",
          "paragraph": {
            "rich_text": [{"type": "text", "text": {"content": "## Executive Summary\nYour content here"}}]
          }
        },
        {
          "type": "paragraph",
          "paragraph": {
            "rich_text": [{"type": "text", "text": {"content": "## Market Position\nYour content here"}}]
          }
        }
      ]
    }
    
    IMPORTANT: The API-patch-block-children tool only supports paragraph and bulleted_list_item blocks. Use markdown headers (##, ###) within the paragraph content to create section headers.
    
    If none of the tools work for adding content, create the page with just the title and include the full report content in the expected_output instead.
  expected_output: >
    A detailed report of the most relevant information about {company_name}, formatted in Markdown, and stored as a new document in Notion using the API-post-page tool.
  agent: reporter
  output_file: report.md